# 📸 Google API設定 - スクリーンショット付きガイド

## 🎯 **ビジュアル設定ガイド**

このガイドでは、Google API設定の各ステップを画像付きで説明します。

---

## 🚀 **Step 1: Google Cloud Console**

### 📱 **プロジェクト作成画面**
```
URL: https://console.cloud.google.com/

見つける要素:
🔹 左上「プロジェクトを選択」ドロップダウン
🔹 「新しいプロジェクト」ボタン  
🔹 プロジェクト名入力フィールド
🔹 青い「作成」ボタン
```

### 🔧 **APIライブラリ画面**
```
ナビゲーション: APIとサービス > ライブラリ

見つける要素:
🔹 検索ボックス「APIとサービスを検索」  
🔹 「Custom Search API」カード
🔹 青い「有効にする」ボタン
🔹 「APIが有効になりました」成功メッセージ
```

### 🔑 **認証情報作成画面**
```
ナビゲーション: APIとサービス > 認証情報

見つける要素:
🔹 「+ 認証情報を作成」ボタン
🔹 「APIキー」オプション
🔹 生成されたAPIキー文字列
🔹 「キーを制限」リンク
```

---

## 🔍 **Step 2: Programmable Search Engine**

### 🌐 **検索エンジン作成画面**
```
URL: https://programmablesearchengine.google.com/

見つける要素:
🔹 「開始する」または「Add」ボタン
🔹 「検索するサイト」入力フィールド
🔹 「検索エンジンの名前」入力フィールド
🔹 「作成」ボタン
```

### ⚙️ **設定パネル**  
```
作成後のコントロールパネル:

見つける要素:
🔹 「設定」タブ
🔹 「画像検索」トグルスイッチ（オン）
🔹 「概要」タブの検索エンジンID
🔹 「更新」ボタン
```

---

## 📋 **Step 3: 設定値の確認**

### 🔑 **取得する重要な値**

#### 1️⃣ **APIキー**
```
形式: AIzaSyC9w-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
場所: Google Cloud Console > 認証情報
用途: API認証に使用

⚠️ セキュリティ注意:
- コードに直接書かない
- 環境変数で管理
- HTTPリファラー制限設定
```

#### 2️⃣ **検索エンジンID**  
```
形式: 1234567890abcdef:xxxxxxxx
場所: Programmable Search Engine > 概要
用途: カスタム検索の実行

📝 設定確認:
- 画像検索: オン
- 検索サイト: 宝塚関連サイト
- セーフサーチ: 厳格
```

---

## 🌐 **Step 4: アプリでの設定**

### 🔧 **アプリ内設定画面**
```
アプリのGoogle API設定モーダル:

要素確認:
🔹 「🔧 Google API設定」ボタン（ヘッダー）
🔹 設定モーダルウィンドウ
🔹 「Google API Key」入力フィールド
🔹 「Search Engine ID」入力フィールド  
🔹 「設定を保存」ボタン
🔹 「接続をテスト」ボタン
```

### 📊 **テスト結果表示**
```
接続テスト後の表示:

成功時:
✅ 緑色背景「Google API接続成功！実際の写真検索が可能です。」

警告時:  
⚠️ 黄色背景「API接続は成功しましたが、検索結果がありません。」

エラー時:
❌ 赤色背景「APIエラー: 403 Forbidden」など
```

---

## 🎯 **設定フロー図解**

### 📊 **設定プロセス概要**
```
Google Cloud Console              Programmable Search
┌─────────────────┐              ┌──────────────────┐
│1. プロジェクト作成    │              │4. 検索エンジン作成     │
│2. API有効化      │    ────────▶  │5. 画像検索オン      │
│3. APIキー作成    │              │6. 検索エンジンID取得  │
└─────────────────┘              └──────────────────┘
          │                               │
          └────────────┐     ┌─────────────┘
                      ▼     ▼
               ┌─────────────────┐
               │アプリケーション設定  │  
               │• APIキー入力    │
               │• 検索エンジンID入力 │
               │• 接続テスト     │
               └─────────────────┘
```

---

## 🔧 **各プラットフォームでの環境変数設定**

### ⚡ **Vercel**
```
設定場所: Dashboard > Settings > Environment Variables

画面要素:
🔹 「Environment Variables」セクション
🔹 「Add」ボタン  
🔹 「Name」フィールド: GOOGLE_SEARCH_API_KEY
🔹 「Value」フィールド: APIキー値
🔹 「Save」ボタン

繰り返し:
🔹 「Name」: GOOGLE_SEARCH_ENGINE_ID  
🔹 「Value」: 検索エンジンID
```

### 🌐 **Netlify**
```  
設定場所: Site settings > Environment variables

画面要素:
🔹 「Environment variables」セクション
🔹 「Add variable」ボタン
🔹 「Key」フィールド: GOOGLE_SEARCH_API_KEY
🔹 「Value」フィールド: APIキー値
🔹 「Save」ボタン
```

### ☁️ **Cloudflare Pages**
```
設定場所: Pages > Settings > Environment variables  

画面要素:
🔹 「Environment variables」タブ
🔹 「Add variable」ボタン
🔹 変数名と値の入力
🔹 「Save」ボタン
```

---

## 🎭 **実際の動作確認**

### 📚 **クイズでの確認方法**
```
手順:
1. アプリにアクセス
2. 「学習開始」をクリック
3. 問題が表示される
4. タカラジェンヌの写真エリアを確認

期待する結果:
✅ 実際の公式写真が表示
✅ 美しい高画質画像  
✅ 適切なタカラジェンヌの写真

問題がある場合:
❌ 代替アバター画像が表示
❌ 「写真を読み込み中...」で止まる
❌ エラーメッセージ表示
```

### 🔍 **開発者ツールでの確認**
```
ブラウザの開発者ツール（F12）で確認:

Console タブ:
✅ 「Google API接続成功」メッセージ
✅ 「実際の写真を表示しました」ログ

Network タブ:  
✅ googleapis.com への成功リクエスト
✅ 200 ステータスコード

エラーがある場合:
❌ 403, 401 エラーコード
❌ CORS エラーメッセージ
❌ API制限エラー
```

---

## 🆘 **トラブルシューティング画像ガイド**

### ❌ **よくあるエラー画面**

#### 🚫 **403 Forbidden**
```
表示場所: ブラウザConsole、アプリのテスト結果

見た目: 
❌ 赤色背景のエラーメッセージ
「APIエラー: 403 Forbidden」

原因と解決:
🔧 HTTPリファラー制限の設定不足
📝 Google Cloud Console でドメイン追加
⏱️ 設定反映まで5-10分待機
```

#### 🚫 **検索結果なし**
```
表示場所: アプリのテスト結果

見た目:
⚠️ 黄色背景の警告メッセージ  
「API接続は成功しましたが、検索結果がありません」

原因と解決:
🔧 検索サイト設定の不備
📝 Programmable Search Engine で宝塚関連サイト追加
🖼️ 画像検索の有効化確認
```

---

## 💡 **設定のコツ・ベストプラクティス**

### 🎯 **効率的な設定順序**
```
推奨順序:
1️⃣ Google Cloud Console でプロジェクト・API・キー作成
2️⃣ Programmable Search Engine で検索エンジン作成  
3️⃣ アプリで接続テスト
4️⃣ 実際のクイズで動作確認
5️⃣ 本番環境で環境変数設定

各ステップでテストを実行して問題を早期発見！
```

### 🔒 **セキュリティ設定のポイント**
```
重要な設定:
🔐 HTTPリファラー制限: 必須
🎯 API制限: Custom Search APIのみ  
🌐 ドメイン制限: 本番・開発環境のみ
💾 環境変数: コードに直接書かない

定期確認:
📊 使用量モニタリング
🔄 APIキーローテーション（必要に応じて）
🛡️ アクセスログ確認
```

このビジュアルガイドで、Google API設定がより簡単になります！ 🌸✨📸